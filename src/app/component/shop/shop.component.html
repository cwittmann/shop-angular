<app-title title="Shop"></app-title>
<div *ngIf="shoppingCart" class="d-flex m-4 sort">
  <a
    *ngIf="shoppingCart.orderLines.length > 0"
    [routerLink]="['/checkout']"
    class="btn btn-primary cart ml-auto"
    ><img class="icon" src="../../../assets/icons/shopping-cart.png" />{{
      shoppingCart?.orderLines?.length
    }}
    items</a
  >
  <a
    *ngIf="shoppingCart.orderLines.length == 0"
    class="btn btn-primary cart ml-auto"
    ><img class="icon" src="../../../assets/icons/shopping-cart.png" />0
    items</a
  >
</div>

<section *ngIf="shoppingCart">
  <div class="card" *ngFor="let product of products" style="width: 18rem;">
    <div class="card-img-container">
      <img
        class="card-img-top"
        [src]="'../../../assets/images/' + product.id + '.png'"
        alt="..."
      />
    </div>
    <div class="card-body">
      <p class="card-title">{{ product?.name }}</p>
      <p class="card-text">
        <small>{{ product?.description }}</small>
      </p>
      <p class="card-text">
        {{ product?.price | currency }}
      </p>
      <select
        [disabled]="isInOrder(product.id)"
        class="form-control numberSelect"
        [id]="product.id"
        #linkRef
      >
        <option *ngFor="let number of numbers" [value]="number">{{
          number
        }}</option>
      </select>
      <button
        *ngIf="!isInOrder(product.id)"
        class="btn btn-primary"
        (click)="addToCart(product)"
      >
        Order
      </button>
      <button
        *ngIf="isInOrder(product.id)"
        class="btn btn-danger"
        (click)="removeFromCart(product)"
      >
        Remove
      </button>
    </div>
  </div>
</section>
